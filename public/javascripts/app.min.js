"use strict";function configs(t,e){var n=function(t,e,n){function s(t){return 401===t.status?e.error("You are unauthorised to access the requested resource (401)"):404===t.status?e.error("The requested resource could not be found (404)"):500===t.status&&e.error("Internal server error (500)"),n.reject(t)}function a(t){return t}return function(t){return t.then(a,s)}};t.interceptors.push(n),e.debugEnabled(!0)}angular.module("app.config",[]).config(configs),angular.module("app.core",[]),angular.module("todoApplication",["ngRoute","ui.bootstrap","app.routes","app.core","app.services","app.config","app.templates"]),angular.module("app.routes",["ngRoute"]).config(function(t,e){t.when("/",{templateUrl:"sections/dashboard/dashboardView.html",controller:"DashboardController as dashboard",resolve:{lists:function(t){return t.getAll()}}}).otherwise({redirectTo:"/"}),e.html5Mode(!0)}),angular.module("app.services",[]),angular.module("app.templates",[]).run(["$templateCache",function(t){t.put("components/list/listView.html",'<div class="list-panel">\n    <!-- Header -->\n    <div class="panel-heading">\n        <div class="list-title">\n            <h3 ng-hide="editList" class="panel-title" ng-bind="list.title"></h3>\n            <form class="list-title-form" ng-show="editList" ng-submit="editList = false">\n                <input class="list-title-input" ng-model="list.title">\n            </form>\n        </div>\n        <div class="list-buttons" ng-hide="editList">\n            <a class="list-button-edit" href="#" ng-click="editList = true" aria-label="Edit list">\n                <span class="list-icon-edit" aria-hidden="true"></span>\n            </a>\n        </div>\n    </div>\n    <!-- Details -->\n    <div class="panel-body">\n        <!-- Progress -->\n        <uib-progressbar class="list-progress" value="list.tasks.completed" max="list.tasks.length">\n            {{list.tasks.completed}} / {{list.tasks.length}}\n        </uib-progressbar>\n    </div>\n    <!-- Task items -->\n    <table class="list-items">\n        <tbody>\n        <tr>\n            <td class="task-new" ng-click="addTask()">\n                <a class="task-button-new" href="#" aria-label="New task">\n                    <span class="task-icon-new" aria-hidden="true"></span>\n                </a>\n            </td>\n            <td colspan="2">\n                <form class="task-form" ng-submit="addTask()">\n                    <input class="task-input" ng-model="name" placeholder="New task...">\n                </form>\n            </td>\n        </tr>\n        <tr ng-repeat="task in list.tasks">\n            <td class="task-toggle" ng-click="toggle(task)">\n                <div class="task-completion">\n                    <label>\n                        <input type="checkbox" ng-checked="task.completed" aria-label="Completion"/>\n                    </label>\n                </div>\n            </td>\n            <td>\n                <div ng-class="{\'task-completed\': task.completed}">\n                    <span class="task-name">{{ task.name }}</span>\n                </div>\n            </td>\n\n            <td class="task-delete" ng-click="removeTask(task)">\n                <a class="task-button-delete" href="#" aria-label="Remove task">\n                    <span class="task-icon-delete" aria-hidden="true"></span>\n                </a>\n            </td>\n        </tr>\n        </tbody>\n    </table>\n</div>'),t.put("sections/dashboard/dashboardView.html",'<!-- TODO content -->\n<div>\n    <div class="col-md-4" ng-repeat="list in dashboard.lists">\n        <list list="list"></list>\n    </div>\n</div>')}]),angular.module("app.services").factory("ListService",["$http",function(t){var e={lists:[]};return e.getAll=function(){return t.get("/api/lists").then(function(t){return angular.copy(t.data,e.lists),e.lists})},e.addTask=function(e,n){return t.post("/api/list/"+e._id+"/tasks",n).then(function(t){e.tasks.push(t.data)})},e.toggle=function(e){return t.put("/api/list/"+e.list._id+"/task/"+e._id+"/toggle").then(function(){e.completed^=!0})},e.delete=function(e){return t.delete("/api/task/"+e._id).then(function(){e.list.tasks.splice(e.list.tasks.indexOf(e),1)})},e}]),angular.module("app.core").controller("ListController",["$scope","ListService",function(t,e){var n=function(){t.list.tasks.completed=t.list.tasks.filter(function(t){return t.completed}).length};t.toggle=function(t){console.log("Toggling task "+t.name),e.toggle(t).then(function(){n()})},t.delete=function(t){console.log("Removing task "+t.name),e.delete(t)},t.addTask=function(){t.name&&""!==t.name&&(console.log("Adding new task "+t.name),e.addTask(t.list,{name:t.name}))},n()}]),angular.module("app.core").directive("list",function(){return{restrict:"E",scope:{list:"="},templateUrl:"components/list/listView.html",controller:"ListController"}}),angular.module("app.core").controller("DashboardController",function(t,e){var n=this;n.lists=e});